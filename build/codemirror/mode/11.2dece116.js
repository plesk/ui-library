webpackJsonp([111],{952:function(e,t,n){!function(e){e(n(915))}(function(e){"use strict";e.defineMode("crystal",function(e){function wordRegExp(e,t){return new RegExp((t?"":"^")+"(?:"+e.join("|")+")"+(t?"$":"\\b"))}function chain(e,t,n){return n.tokenize.push(e),e(t,n)}function tokenBase(e,f){if(e.eatSpace())return null;if("\\"!=f.lastToken&&e.match("{%",!1))return chain(tokenMacro("%","%"),e,f);if("\\"!=f.lastToken&&e.match("{{",!1))return chain(tokenMacro("{","}"),e,f);if("#"==e.peek())return e.skipToEnd(),"comment";var k;if(e.match(a))return e.eat(/[?!]/),k=e.current(),e.eat(":")?"atom":"."==f.lastToken?"property":c.test(k)?(s.test(k)?"fun"==k&&f.blocks.indexOf("lib")>=0||"def"==k&&"abstract"==f.lastToken||(f.blocks.push(k),f.currentIndent+=1):"operator"!=f.lastStyle&&f.lastStyle||!l.test(k)?"end"==k&&(f.blocks.pop(),f.currentIndent-=1):(f.blocks.push(k),f.currentIndent+=1),p.hasOwnProperty(k)&&f.tokenize.push(p[k]),"keyword"):i.test(k)?"atom":"variable";if(e.eat("@"))return"["==e.peek()?chain(tokenNest("[","]","meta"),e,f):(e.eat("@"),e.match(a)||e.match(u),"variable-2");if(e.match(u))return"tag";if(e.eat(":"))return e.eat('"')?chain(tokenQuote('"',"atom",!1),e,f):e.match(a)||e.match(u)||e.match(t)||e.match(n)||e.match(r)?"atom":(e.eat(":"),"operator");if(e.eat('"'))return chain(tokenQuote('"',"string",!0),e,f);if("%"==e.peek()){var h,m="string",F=!0;if(e.match("%r"))m="string-2",h=e.next();else if(e.match("%w"))F=!1,h=e.next();else if(e.match("%q"))F=!1,h=e.next();else{if(!(h=e.match(/^%([^\w\s=])/)))return e.match(/^%[a-zA-Z0-9_\u009F-\uFFFF]*/)?"meta":"operator";h=h[1]}return d.hasOwnProperty(h)&&(h=d[h]),chain(tokenQuote(h,m,F),e,f)}return(k=e.match(/^<<-('?)([A-Z]\w*)\1/))?chain(tokenHereDoc(k[2],!k[1]),e,f):e.eat("'")?(e.match(/^(?:[^']|\\(?:[befnrtv0'"]|[0-7]{3}|u(?:[0-9a-fA-F]{4}|\{[0-9a-fA-F]{1,6}\})))/),e.eat("'"),"atom"):e.eat("0")?(e.eat("x")?e.match(/^[0-9a-fA-F]+/):e.eat("o")?e.match(/^[0-7]+/):e.eat("b")&&e.match(/^[01]+/),"number"):e.eat(/^\d/)?(e.match(/^\d*(?:\.\d+)?(?:[eE][+-]?\d+)?/),"number"):e.match(t)?(e.eat("="),"operator"):e.match(n)||e.match(o)?"operator":(k=e.match(/[({[]/,!1))?(k=k[0],chain(tokenNest(k,d[k],null),e,f)):e.eat("\\")?(e.next(),"meta"):(e.next(),null)}function tokenNest(e,t,n,r){return function(o,a){if(!r&&o.match(e))return a.tokenize[a.tokenize.length-1]=tokenNest(e,t,n,!0),a.currentIndent+=1,n;var u=tokenBase(o,a);return o.current()===t&&(a.tokenize.pop(),a.currentIndent-=1,u=n),u}}function tokenMacro(e,t,n){return function(r,o){return!n&&r.match("{"+e)?(o.currentIndent+=1,o.tokenize[o.tokenize.length-1]=tokenMacro(e,t,!0),"meta"):r.match(t+"}")?(o.currentIndent-=1,o.tokenize.pop(),"meta"):tokenBase(r,o)}}function tokenFollowIdent(e,o){return e.eatSpace()?null:(e.match(a)?e.eat(/[!?]/):e.match(t)||e.match(n)||e.match(r),o.tokenize.pop(),"def")}function tokenFollowType(e,t){return e.eatSpace()?null:(e.match(u),t.tokenize.pop(),"def")}function tokenQuote(e,t,n){return function(r,o){for(var a=!1;r.peek();)if(a)r.next(),a=!1;else{if(r.match("{%",!1))return o.tokenize.push(tokenMacro("%","%")),t;if(r.match("{{",!1))return o.tokenize.push(tokenMacro("{","}")),t;if(n&&r.match("#{",!1))return o.tokenize.push(tokenNest("#{","}","meta")),t;var u=r.next();if(u==e)return o.tokenize.pop(),t;a=n&&"\\"==u}return t}}function tokenHereDoc(e,t){return function(n,r){if(n.sol()&&(n.eatSpace(),n.match(e)))return r.tokenize.pop(),"string";for(var o=!1;n.peek();)if(o)n.next(),o=!1;else{if(n.match("{%",!1))return r.tokenize.push(tokenMacro("%","%")),"string";if(n.match("{{",!1))return r.tokenize.push(tokenMacro("{","}")),"string";if(t&&n.match("#{",!1))return r.tokenize.push(tokenNest("#{","}","meta")),"string";o=t&&"\\"==n.next()}return"string"}}var t=/^(?:[-+/%|&^]|\*\*?|[<>]{2})/,n=/^(?:[=!]~|===|<=>|[<>=!]=?|[|&]{2}|~)/,r=/^(?:\[\][?=]?)/,o=/^(?:\.(?:\.{2})?|->|[?:])/,a=/^[a-z_\u009F-\uFFFF][a-zA-Z0-9_\u009F-\uFFFF]*/,u=/^[A-Z_\u009F-\uFFFF][a-zA-Z0-9_\u009F-\uFFFF]*/,c=wordRegExp(["abstract","alias","as","asm","begin","break","case","class","def","do","else","elsif","end","ensure","enum","extend","for","fun","if","include","instance_sizeof","lib","macro","module","next","of","out","pointerof","private","protected","rescue","return","require","select","sizeof","struct","super","then","type","typeof","uninitialized","union","unless","until","when","while","with","yield","__DIR__","__END_LINE__","__FILE__","__LINE__"]),i=wordRegExp(["true","false","nil","self"]),s=wordRegExp(["def","fun","macro","class","module","struct","lib","enum","union","do","for"]),l=wordRegExp(["if","unless","case","while","until","begin","then"]),f=["end","else","elsif","rescue","ensure"],k=wordRegExp(f),h=["\\)","\\}","\\]"],m=new RegExp("^(?:"+h.join("|")+")$"),p={def:tokenFollowIdent,fun:tokenFollowIdent,macro:function tokenMacroDef(e,t){if(e.eatSpace())return null;var n;if(n=e.match(a)){if("def"==n)return"keyword";e.eat(/[?!]/)}return t.tokenize.pop(),"def"},class:tokenFollowType,module:tokenFollowType,struct:tokenFollowType,lib:tokenFollowType,enum:tokenFollowType,union:tokenFollowType},d={"[":"]","{":"}","(":")","<":">"};return{startState:function(){return{tokenize:[tokenBase],currentIndent:0,lastToken:null,lastStyle:null,blocks:[]}},token:function(e,t){var n=t.tokenize[t.tokenize.length-1](e,t),r=e.current();return n&&"comment"!=n&&(t.lastToken=r,t.lastStyle=n),n},indent:function(t,n){return n=n.replace(/^\s*(?:\{%)?\s*|\s*(?:%\})?\s*$/g,""),k.test(n)||m.test(n)?e.indentUnit*(t.currentIndent-1):e.indentUnit*t.currentIndent},fold:"indent",electricInput:wordRegExp(h.concat(f),!0),lineComment:"#"}}),e.defineMIME("text/x-crystal","crystal")})}});